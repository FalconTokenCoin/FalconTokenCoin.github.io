<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>adding......</title>
    <style>
        html {
            margin: 0;
            padding: 0;
        }

        body {
            padding: 1rem;
        }

        input {
            width: 100%;
            padding: 5px;
        }
    </style>
</head>
<body>

<h1>为任意代币添加logo</h1>
<p>Add token with logo to your wallet</p>
<p>
    <!--    <input type="text" id="chain" value='fillValue("chain")'>-->
    <select id="chain">
        <option value="bscChainTestNet">bscChain Test Net</option>
        <option value="bscChainMainNet">bscChain Main Net</option>
    </select>
    <button onclick="switchChain()">switch chain(切换链)</button>
</p>
<p>token(合约地址):<br> <input type="text" id="token" value='fillValue("token")'></p>
<p>symbol(代币符号):<br> <input type="text" id="symbol" value='fillValue("symbol")'></p>
<p>decimals(代币精度):<br> <input type="text" id="decimals" value='fillValue("decimals")'></p>
<p>logo(代币logo):
    <button onclick="showLogo()">show logo</button>
    <input type="text" id="logo" value='fillValue("logo")'>
    <img src="" width="200">
</p>
<p>
    <button>添加logo到钱包</button>
    <button onclick="url()">一键直达链接</button>
</p>
<p><input type="text" id="url" placeholder="一键直达链接"></p>


<script src="chiantools.js"></script>
<script>
    function fillValue(id) {
        document.querySelector("#" + id).value = getQueryString(id);
    }

    function showLogo() {
        document.querySelector("img").src = document.querySelector("#logo").value
    }

    async function switchChain() {
        let chain = document.querySelector("#chain").value
        await registerEthereumChain(chain)
    }

    function url() {
        let chain = document.querySelector("#chain").value
        let token = document.querySelector("#token").value
        let symbol = document.querySelector("#symbol").value
        let decimals = document.querySelector("#decimals").value
        let logo = document.querySelector("#logo").value
        document.querySelector("#url").value = `https://falcontokencoin.github.io/addLogo.html?chain=${chain}&token=${token}&symbol=${symbol}&decimals=${decimals}&logo=${logo}`
    }

    window.onload = async () => {
        if (typeof window.ethereum !== 'undefined') {
            console.log('MetaMask is installed!');
            fillValue("chain");
            fillValue("token");
            fillValue("symbol");
            fillValue("decimals");
            fillValue("logo");
            showLogo();
            // bscChainTestNet, bscChainMainNet
            await switchChain()
            await addTokenToWallet(getQueryString("token"),getQueryString("symbol"),getQueryString("decimals"),getQueryString("logo"));
        } else {
            alert("请在钱包内打开，或者安装钱包浏览器插件metamask")
        }
    }
</script>
</body>
</html>